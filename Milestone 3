---
#
# EECS 4287/5287: Principles of Cloud Computing
# Author: Group 16
# Created: Fall 2021
# Modified: Fall 2021
#
# This playbook is our demo master file
# The goal is to show how to have a single master file which then
# includes multiple plays according to some well-designed choreography
#
# This file is similar to the one in the AnsibleOnly_Local_and_Cloud folder
# For now I just kept one play in here but feel free to add more.
#####################################################
### Play 1: Get facts from all our VMs
#
# Here I show the use of import_tasks from child playbooks
#####################################################

- name: "Play 6: Create k8s Cluster"
  hosts: MyVM2       # specified in the MyInventory file
  remote_user:  cc       # change this user to what it is for the cloud
  strategy: debug        # start a debugger on error
  become: yes               # run as sudo
  collections:               # import the plugin
  - openstack.cloud

  tasks:
  # - include_tasks: tasks/playbook_create_k8s_cluster.yml

- name: "Play 7: Worker Addition"
  hosts: MyVM3      # specified in the MyInventory file
  remote_user:  cc       # change this user to what it is for the cloud
  strategy: debug        # start a debugger on error
  become: yes               # run as sudo
  collections:               # import the plugin
  - openstack.cloud

  tasks:
  # - include_tasks: tasks/playbook_worker_addition.yml

- name: "Play 8: Master Tainting"
  hosts: MyVM2       # specified in the MyInventory file
  remote_user:  cc       # change this user to what it is for the cloud
  strategy: debug        # start a debugger on error
  become: yes               # run as sudo
  collections:               # import the plugin
  - openstack.cloud

  tasks:
  # - include_tasks: tasks/playbook_taint_master.yml
  
  # playbook to build dockerfile
  
  # create private registry, tag and push to private registry 
  
  # in the etc/docker directory on each node, add line in daemon.json
  
  # restart regsitry 
  
  # push image to new registry 
  
  # start master
  
  # starts kafka worker
  
  # start couchdb worker
  
  # start consumer worker
...
